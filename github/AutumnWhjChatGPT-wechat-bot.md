ChatGPT-wechat-bot🤖 Support 合作 默认配置 开始设置机器人 🤖 设置反向代理地址 QA 👏🏻 欢迎一起共建

##  README.md

# ChatGPT-wechat-bot🤖

[![Version](https://camo.githubusercontent.com/f3f001c434f6a65366705df2cb20d68850f54fe46b9d4b2043d9b3cf7e1fdeab/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f76657273696f6e2d312e302e302d626c75652e7376673f63616368655365636f6e64733d32353932303030)](https://camo.githubusercontent.com/f3f001c434f6a65366705df2cb20d68850f54fe46b9d4b2043d9b3cf7e1fdeab/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f76657273696f6e2d312e302e302d626c75652e7376673f63616368655365636f6e64733d32353932303030) ![License: ISC](https://camo.githubusercontent.com/eab1a35d6b347493d4c0784a527b56e643684c1854d457e5509c26a215a658a4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4953432d79656c6c6f772e737667)

> 几步即可获得一个基于 ChatGPT 的微信机器人 🤖。 [English](/AutumnWhj/ChatGPT-wechat-bot/blob/master/README.md) | 中文文档

## Support

  * 支持上下文语境的对话。
  * 支持重置上下文语境，通过关键词(reset)重置对话上下文语境。
  * 支持在群聊@你的机器人 🤖，@机器人即可收到回复。
  * 支持通过关键词唤醒你的机器人，如当在群组中发送“@机器人 hello xxxx”时才会收到回复。
  * 其他



## 合作

如果你没有开发能力，可将其接入 AI 机器人管家 平台，可实现以下功能：

**社群管理** ，根据关键字自动通过好友，对好友自动分组，添加备注并拉入相对应的群。

**智能对话** ，与 ChatGPT 及必应等 AI 结合，来处理各种咨询问题。

**智能客服** ，将客服知识库喂入机器人，使其能够作为专业的客服回答客户问题。(后续支持千牛等电商平台)

**定时任务** ，每天定时定点在微信群发送行业信息促进活跃度。如果是中学高校或教育集团，可以发送昨日学员学习信息统计等

如果你想委托二次开发，也支持二次定制化开发。

[![image](https://camo.githubusercontent.com/06d5cdfe9de5ed0ab61b7fea9d5b22297cba2cebbe5678c784037a61b40cf474/68747470733a2f2f7374617469632e7368616e7975652e746563682f696d616765732f32332d30332d32322f636c6970626f6172642d353133372e3830303039332e77656270)](https://camo.githubusercontent.com/06d5cdfe9de5ed0ab61b7fea9d5b22297cba2cebbe5678c784037a61b40cf474/68747470733a2f2f7374617469632e7368616e7975652e746563682f696d616765732f32332d30332d32322f636c6970626f6172642d353133372e3830303039332e77656270)

## 默认配置
    
    
    {
      // 填入你的OPENAI_API_KEY
      OPENAI_API_KEY: "",
      // 反向代理地址，简单说就是你的在国外服务器地址，如何获取看README
      reverseProxyUrl: "",
      // 在群组中设置唤醒微信机器人的关键词
      groupKey: "",
      // 在私聊中设置唤醒微信机器人的关键词
      privateKey: "",
      // 重置上下文的关键词，如可设置为reset
      resetKey: "reset",
      // 是否在群聊中带上提问的问题
      groupReplyMode: true,
      // 是否在私聊中带上提问的问题
      privateReplyMode: false,
    }
    

## 开始设置机器人 🤖

  1. 首先，需要按照以下步骤获你的 ChatGPT 的 OPENAI_API_KEY.



> 获取你的 OPENAI_API_KEY:
> 
>   * 打开 <https://platform.openai.com/overview> 并登录注册，进入网页。
> 


[![image.png](https://camo.githubusercontent.com/aa74465aee3ea48f6daebc5284d17331aa83fbebab9f866534368c7dc309f2a0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032332f706e672f323737373234392f313637353431333133383431382d64356466323534332d626433372d343163632d613136632d3530356335613338653838642e706e67)](https://camo.githubusercontent.com/aa74465aee3ea48f6daebc5284d17331aa83fbebab9f866534368c7dc309f2a0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032332f706e672f323737373234392f313637353431333133383431382d64356466323534332d626433372d343163632d613136632d3530356335613338653838642e706e67) [![image.png](https://camo.githubusercontent.com/4be8fc48464571d4fd7d129c81affdafbfcc91ee0b7cc30040ddf977a713a4b7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032332f706e672f323737373234392f313637353431333139303138382d34636631303934372d656137662d343739642d393535302d3064656339643430633065322e706e673f782d6f73732d70726f636573733d696d616765253246726573697a65253243775f313530302532436c696d69745f30)](https://camo.githubusercontent.com/4be8fc48464571d4fd7d129c81affdafbfcc91ee0b7cc30040ddf977a713a4b7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032332f706e672f323737373234392f313637353431333139303138382d34636631303934372d656137662d343739642d393535302d3064656339643430633065322e706e673f782d6f73732d70726f636573733d696d616765253246726573697a65253243775f313530302532436c696d69745f30)

  2. 把 OPENAI_API_KEY 填入目录`src/config.ts`下的 `OPENAI_API_KEY` 中

  3. 把 reverseProxyUrl 填入目录`src/config.ts`下的 `reverseProxyUrl` 中，如何设置可看下面介绍。




> 当然也可以选择白嫖山月老师的代理地址：`https://ai.devtool.tech/proxy/v1/chat/completions`，可以关注[他的项目](https://github.com/shfshanyue/wechat-chatgpt)

  4. 然后在终端运行以下命令。如有需要，请在`src/config.ts`中配置其它配置变量。


    
    
      // 安装依赖
      npm i
      npm run dev
    
      // 也可以使用pnpm
      npm i -g pnpm
      pnpm i
      pnpm run dev

  3. 执行完之后，可以看到终端控制台输出一下信息，扫码登录即可. [![image.png](https://camo.githubusercontent.com/227b7f67367041ef6bbf3a7a44270891cc795315cda1548e2ee30fe829f2ce3a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032322f706e672f323737373234392f313637303238373133383930382d63633839386335382d366530612d343838662d616530372d6165343839353038633162652e706e6723617665726167654875653d25323334383439343826636c69656e7449643d7566343032336430612d306461372d342663726f703d302663726f703d302663726f703d312663726f703d312666726f6d3d7061737465266865696768743d3434322669643d756235666565366237266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d31323030266f726967696e57696474683d31363630266f726967696e616c547970653d62696e61727926726174696f3d3126726f746174696f6e3d302673686f775469746c653d66616c73652673697a653d343932333730267374617475733d646f6e65267374796c653d6e6f6e65267461736b49643d7532333364393133392d316566352d343262662d396634342d3335346336353635383632267469746c653d2677696474683d363132)](https://camo.githubusercontent.com/227b7f67367041ef6bbf3a7a44270891cc795315cda1548e2ee30fe829f2ce3a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032322f706e672f323737373234392f313637303238373133383930382d63633839386335382d366530612d343838662d616530372d6165343839353038633162652e706e6723617665726167654875653d25323334383439343826636c69656e7449643d7566343032336430612d306461372d342663726f703d302663726f703d302663726f703d312663726f703d312666726f6d3d7061737465266865696768743d3434322669643d756235666565366237266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d31323030266f726967696e57696474683d31363630266f726967696e616c547970653d62696e61727926726174696f3d3126726f746174696f6e3d302673686f775469746c653d66616c73652673697a653d343932333730267374617475733d646f6e65267374796c653d6e6f6e65267461736b49643d7532333364393133392d316566352d343262662d396634342d3335346336353635383632267469746c653d2677696474683d363132)

  4. 登录成功，用另外一个微信往你扫码登录的微信发消息，你将会收到来自 ChatGPT 的回复。 [![image.png](https://camo.githubusercontent.com/4a7b5544ec3822d7c4f8b97e8ec276bd84592e7bf44b85311d3584c051dae856/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032322f706e672f323737373234392f313637303238383237383630372d37336265656438332d316134322d343264622d383430342d3732626136306266326335332e706e6723617665726167654875653d25323334643465346426636c69656e7449643d7566343032336430612d306461372d342663726f703d302663726f703d302663726f703d312663726f703d312666726f6d3d7061737465266865696768743d3433372669643d756666353236353162266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d383734266f726967696e57696474683d31333938266f726967696e616c547970653d62696e61727926726174696f3d3126726f746174696f6e3d302673686f775469746c653d66616c73652673697a653d353433343739267374617475733d646f6e65267374796c653d6e6f6e65267461736b49643d7562353535396563372d333066382d346330372d613966382d3134343561363539383335267469746c653d2677696474683d363939)](https://camo.githubusercontent.com/4a7b5544ec3822d7c4f8b97e8ec276bd84592e7bf44b85311d3584c051dae856/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032322f706e672f323737373234392f313637303238383237383630372d37336265656438332d316134322d343264622d383430342d3732626136306266326335332e706e6723617665726167654875653d25323334643465346426636c69656e7449643d7566343032336430612d306461372d342663726f703d302663726f703d302663726f703d312663726f703d312666726f6d3d7061737465266865696768743d3433372669643d756666353236353162266d617267696e3d2535426f626a6563742532304f626a656374253544266e616d653d696d6167652e706e67266f726967696e4865696768743d383734266f726967696e57696474683d31333938266f726967696e616c547970653d62696e61727926726174696f3d3126726f746174696f6e3d302673686f775469746c653d66616c73652673697a653d353433343739267374617475733d646f6e65267374796c653d6e6f6e65267461736b49643d7562353535396563372d333066382d346330372d613966382d3134343561363539383335267469746c653d2677696474683d363939)[![image.png](https://camo.githubusercontent.com/ae7a70c2a4a7860b972af553bf009f0f2489ddb415968a54b7651a2cecdccaf0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032332f706e672f323737373234392f313638303235383132303131302d32303334333832362d643264632d346664352d396639342d3161343065343339343062622e706e673f782d6f73732d70726f636573733d696d616765253246726573697a65253243775f313237302532436c696d69745f30)](https://camo.githubusercontent.com/ae7a70c2a4a7860b972af553bf009f0f2489ddb415968a54b7651a2cecdccaf0/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032332f706e672f323737373234392f313638303235383132303131302d32303334333832362d643264632d346664352d396639342d3161343065343339343062622e706e673f782d6f73732d70726f636573733d696d616765253246726573697a65253243775f313237302532436c696d69745f30)




## 设置反向代理地址

ChatGPT API 代理<https://hub.docker.com/r/mirrors2/chatgpt-api-proxy>

chatgpt api 代理,已验证 OpenCat,AssisChat,AMA(问天),chathub

可配置好 OPENAI_API_KEY 分享代理地址给他人用.

快速开始
    
    
    docker run -d -p 80:80 --name chatgpt-api-proxy mirrors2/chatgpt-api-proxy
    
    可选 -e OPENAI_API_KEY={nide_api_key}
    
    

docker 跑起来之后你的代理地址就生效了：

官方的：`https://api.openai.com/v1/chat/completions`

你的： `你的域名/v1/chat/completions` 或者 `你的服务器ip和端口/v1/chat/completions`

## QA

  1. 微信无法取消登录问题 可以直接删除`WechatEveryDay.memory-card`文件，重新跑程序

  2. 支持的 node 版本: Node.js >= 16.8

  3. 因为 ChatGPT 的长度限制，如果回复消息不完整，可以对它说"请继续" 或者 "请继续写完"。




[![image](https://user-images.githubusercontent.com/39156049/206840335-a64ee27c-df4f-4e70-8604-669fc9468910.png)](https://user-images.githubusercontent.com/39156049/206840335-a64ee27c-df4f-4e70-8604-669fc9468910.png)

  4. Error: Failed to launch the browser process puppeteer refer to <https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md#chrome-headless-doesnt-launch-on-unix>


    
    
    // ubuntu
    sudo apt-get install chromium-browser
    sudo apt-get install  ca-certificates fonts-liberation libasound2 libatk-bridge2.0-0 libatk1.0-0 libc6 libcairo2 libcups2 libdbus-1-3 libexpat1 libfontconfig1 libgbm1 libgcc1 libglib2.0-0 libgtk-3-0 libnspr4 libnss3 libpango-1.0-0 libpangocairo-1.0-0 libstdc++6 libx11-6 libx11-xcb1 libxcb1 libxcomposite1 libxcursor1 libxdamage1 libxext6 libxfixes3 libxi6 libxrandr2 libxrender1 libxss1 libxtst6 lsb-release wget xdg-utils
    
    

## 👏🏻 欢迎一起共建

欢迎贡献你的代码以及想法 🍵。
